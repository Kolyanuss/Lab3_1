<Html>

<Head>
    <title> Перетягування </title>
</head>

<Body onload="init()">
    <H2 align="center" style="color: #ff00ff">
        Перетасківаніеквадрата мишкою </h2>
    <h3 align="center">
        Встановіть курсор всередині красногоквадрата, натисніть ліву кнопку
        мишки і тягніть квадрат. <BR> Для звільнення квадрата
        від захоплення відпустіть мишку </h3>
    <P align=right> Примітка. сторінка правильно
        відображається в браузерах <i> Mozilla Firefox 2.0 </i>
        і <i> Internet Explorer 6.0 </i>
    </p>
    <DIV onmouse id='graySquare' style="left: 100; top: 200; width: 500; height: 500; background-color: gray">
        <DIV id='kv' style="Position: absolute; left: 10; top: 200; width: 50; height: 50; background-color: red"></Div>
    </Div>
</Body>
<SCRIPT>
    flag = false;
    flagMainGray = false;
    function init() {
        document.all.kv.onmousemove = dragIt
        document.all.kv.onmouseup = osvobodi
        document.all.kv.onmousedown = zachvat
        document.all.kv.onmouseleave = () => flagMainGray = false;
        // document.all.kv.onmouseenter = () => flagMainGray = true;

        document.all.graySquare.onmouseenter = () => flagMainGray = true;
        document.all.graySquare.onmouseleave = () => flagMainGray = false;
        // document.all.graySquare.onmouseout = () => flagMainGray = false;
    }
    function dragIt(evt) {
        sobytie = (evt) ? evt : (window.event) ? window.event : "";
        if (flag) {
            if (flagMainGray) {
                document.all.kv.style.top = sobytie.clientY - 25;
                document.all.kv.style.left = sobytie.clientX - 25;
            }
        }
    }
    function osvobodi() {
        flag = false; // встановлюється заборона на перетягування
    }
    function zachvat() {
        flag = true; // Перетягування дозволяється
    }
</SCRIPT>

</Html>